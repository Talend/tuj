X-Account-Key: account2
X-UIDL: UID5411-1188803864
X-Mozilla-Status: 0001
X-Mozilla-Status2: 10000000
Return-Path: <qirui.wang@soyatec.com>
X-Original-To: chen.pei@soyatec.com
Delivered-To: m8933923@spaceymail-a6.g.dreamhost.com
Received: from [192.168.11.109] (unknown [219.134.64.71])
	by spaceymail-a6.g.dreamhost.com (Postfix) with ESMTP id DD7F1CA6CA
	for <chen.pei@soyatec.com>; Thu, 20 Mar 2008 23:35:40 -0700 (PDT)
Message-ID: <47E35752.90808@soyatec.com>
Date: Fri, 21 Mar 2008 14:36:02 +0800
From: "qirui.wang" <qirui.wang@soyatec.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: chen.pei@soyatec.com
Subject: erhe
Content-Type: multipart/mixed;
 boundary="------------080509050502020809090403"

This is a multi-part message in MIME format.
--------------080509050502020809090403
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 7bit

tjeer

--------------080509050502020809090403
Content-Type: text/plain;
 name="trtrrj.txt"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="trtrrj.txt"

cGFja2FnZSBjb20uc295YXRlYy5lZmFjZS5zd3Q7DQoNCmltcG9ydCBvcmcuZWNsaXBzZS5z
d3QuU1dUOw0KaW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5ncmFwaGljcy5Db2xvcjsNCmltcG9y
dCBvcmcuZWNsaXBzZS5zd3QuZ3JhcGhpY3MuRm9udDsNCmltcG9ydCBvcmcuZWNsaXBzZS5z
d3QuZ3JhcGhpY3MuR0M7DQppbXBvcnQgb3JnLmVjbGlwc2Uuc3d0LmdyYXBoaWNzLkltYWdl
Ow0KaW1wb3J0IG9yZy5lY2xpcHNlLnN3dC5ncmFwaGljcy5Qb2ludDsNCmltcG9ydCBvcmcu
ZWNsaXBzZS5zd3QuZ3JhcGhpY3MuUmVjdGFuZ2xlOw0KaW1wb3J0IG9yZy5lY2xpcHNlLnN3
dC5ncmFwaGljcy5SZXNvdXJjZTsNCmltcG9ydCBvcmcuZWNsaXBzZS5zd3Qud2lkZ2V0cy5D
YW52YXM7DQppbXBvcnQgb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQ29tcG9zaXRlOw0KaW1w
b3J0IG9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkV2ZW50Ow0KaW1wb3J0IG9yZy5lY2xpcHNl
LnN3dC53aWRnZXRzLldpZGdldDsNCg0KaW1wb3J0IGNvbS5zb3lhdGVjLmVmYWNlLmNvcmUu
SUV4dGVuc2lvbkNvbnRleHQ7DQppbXBvcnQgY29tLnNveWF0ZWMuZWZhY2UuY29yZS5JVmlz
dWFsT2JqZWN0Ow0KaW1wb3J0IGNvbS5zb3lhdGVjLmVmYWNlLnN3dC5sYXlvdXQuQ29udGVu
dExheW91dDsNCmltcG9ydCBjb20uc295YXRlYy5lZmFjZS5zd3Qud2lkZ2V0cy5XcmFwcGVy
Ow0KaW1wb3J0IGNvbS5zb3lhdGVjLmVmYWNlLnVwZi5CcnVzaDsNCmltcG9ydCBjb20uc295
YXRlYy5lZmFjZS51cGYuQnJ1c2hlczsNCmltcG9ydCBjb20uc295YXRlYy5lZmFjZS51cGYu
Q29udHJvbDsNCmltcG9ydCBjb20uc295YXRlYy5lZmFjZS51cGYuQ29udHJvbFRlbXBsYXRl
Ow0KaW1wb3J0IGNvbS5zb3lhdGVjLmVmYWNlLnVwZi5Gb250U3RyZXRjaGVzOw0KaW1wb3J0
IGNvbS5zb3lhdGVjLmVmYWNlLnVwZi5Gb250U3R5bGU7DQppbXBvcnQgY29tLnNveWF0ZWMu
ZWZhY2UudXBmLkZvbnRXZWlnaHRzOw0KaW1wb3J0IGNvbS5zb3lhdGVjLmVmYWNlLnVwZi5I
b3Jpem9udGFsQWxpZ25tZW50Ow0KaW1wb3J0IGNvbS5zb3lhdGVjLmVmYWNlLnVwZi5Ib3Jp
em9udGFsQ29udGVudEFsaWdubWVudDsNCmltcG9ydCBjb20uc295YXRlYy5lZmFjZS51cGYu
VGFiQ29udHJvbDsNCmltcG9ydCBjb20uc295YXRlYy5lZmFjZS51cGYuVGhpY2tuZXNzOw0K
aW1wb3J0IGNvbS5zb3lhdGVjLmVmYWNlLnVwZi5VSUVsZW1lbnQ7DQppbXBvcnQgY29tLnNv
eWF0ZWMuZWZhY2UudXBmLlZlcnRpY2FsQWxpZ25tZW50Ow0KaW1wb3J0IGNvbS5zb3lhdGVj
LmVmYWNlLnVwZi5WZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnQ7DQoNCnB1YmxpYyBhYnN0cmFj
dCBjbGFzcyBBYnN0cmFjdENvbnRyb2wgZXh0ZW5kcyBTV1RGcmFtZXdvcmtFbGVtZW50IHsN
Cg0KCXB1YmxpYyBBYnN0cmFjdENvbnRyb2woSUV4dGVuc2lvbkNvbnRleHQgY29udGV4dCwg
SVZpc3VhbE9iamVjdCBlbGVtZW50KSB7DQoJCXN1cGVyKGNvbnRleHQsIGVsZW1lbnQpOw0K
CX0NCg0KCXByb3RlY3RlZCBXaWRnZXQgY2hlY2tDcmVhdGVDb250cm9sKFdpZGdldCBwYXJl
bnQpIHsNCgkJY29tLnNveWF0ZWMuZWZhY2UudXBmLkNvbnRyb2wgY29udHJvbCA9IChjb20u
c295YXRlYy5lZmFjZS51cGYuQ29udHJvbCkgZ2V0VmlzdWFsT2JqZWN0KCk7DQoJCUNvbnRy
b2xUZW1wbGF0ZSBjb250cm9sVGVtcGxhdGUgPSBjb250cm9sLmdldFRlbXBsYXRlKCk7DQoJ
CWlmIChjb250cm9sVGVtcGxhdGUgIT0gbnVsbCkgew0KCQkJZm9yIChJVmlzdWFsT2JqZWN0
IG9iamVjdCA6IGNvbnRyb2xUZW1wbGF0ZS5nZXRWaXN1YWxDaGlsZHJlbigpKSB7DQoJCQkJ
aWYgKG9iamVjdCBpbnN0YW5jZW9mIFVJRWxlbWVudCkgew0KCQkJCQlyZXR1cm4gbnVsbDsN
CgkJCQl9DQoJCQl9DQoJCQlyZXR1cm4gbmV3IENhbnZhcyhmaW5kQ29tcG9zaXRlUGFyZW50
KHBhcmVudCksIFNXVC5OT05FKTsNCgkJfQ0KCQlyZXR1cm4gc3VwZXIuY2hlY2tDcmVhdGVD
b250cm9sKHBhcmVudCk7DQoJfQ0KDQoJcHJvdGVjdGVkIFdpZGdldCBjcmVhdGVDb21wb25l
bnQoQ29tcG9zaXRlIHBhcmVudCkgew0KCQljb20uc295YXRlYy5lZmFjZS51cGYuQ29udHJv
bCBjb250cm9sID0gKGNvbS5zb3lhdGVjLmVmYWNlLnVwZi5Db250cm9sKSBnZXRWaXN1YWxP
YmplY3QoKTsNCgkJQ29udHJvbFRlbXBsYXRlIGNvbnRyb2xUZW1wbGF0ZSA9IGNvbnRyb2wu
Z2V0VGVtcGxhdGUoKTsNCgkJaWYgKGNvbnRyb2xUZW1wbGF0ZSAhPSBudWxsKSB7DQoJCQlm
b3IgKElWaXN1YWxPYmplY3Qgb2JqZWN0IDogY29udHJvbFRlbXBsYXRlLmdldFZpc3VhbENo
aWxkcmVuKCkpIHsNCgkJCQlpZiAob2JqZWN0IGluc3RhbmNlb2YgVUlFbGVtZW50KSB7DQoJ
CQkJCXJldHVybiBudWxsOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCQlyZXR1cm4gc3VwZXIuY3Jl
YXRlQ29tcG9uZW50KHBhcmVudCk7DQoJfQ0KDQoJcHVibGljIHZvaWQgdXBkYXRlSGFzRXJy
b3IoYm9vbGVhbiByZWZyZXNoKSB7DQoJCU9iamVjdCB3aWRnZXQgPSBnZXRTb3VyY2VPYmpl
Y3QoKTsNCgkJaWYgKHdpZGdldCA9PSBudWxsKSB7DQoJCQlyZXR1cm47DQoJCX0NCgkJcmVj
cmVhdGVVSSgpOw0KCX0NCg0KCUBPdmVycmlkZQ0KCXB1YmxpYyBib29sZWFuIGlzVGhpbkVs
ZW1lbnQoKSB7DQoJCUNvbnRyb2wgY29udHJvbCA9IChDb250cm9sKSBnZXRWaXN1YWxPYmpl
Y3QoKTsNCgkJVGhpY2tuZXNzIG1hcmdpbiA9IGNvbnRyb2wuZ2V0TWFyZ2luKCk7DQoJCVRo
aWNrbmVzcyBwYWRkaW5nID0gY29udHJvbC5nZXRQYWRkaW5nKCk7DQoJCVRoaWNrbmVzcyBi
b3JkZXJUaGlja25lc3MgPSBjb250cm9sLmdldEJvcmRlclRoaWNrbmVzcygpOw0KCQlIb3Jp
em9udGFsQWxpZ25tZW50IGhvcml6b250YWxBbGlnbm1lbnQgPSBjb250cm9sDQoJCQkJLmdl
dEhvcml6b250YWxBbGlnbm1lbnQoKTsNCgkJVmVydGljYWxBbGlnbm1lbnQgdmVydGljYWxB
bGlnbm1lbnQgPSBjb250cm9sLmdldFZlcnRpY2FsQWxpZ25tZW50KCk7DQoJCUhvcml6b250
YWxDb250ZW50QWxpZ25tZW50IGhvcml6b250YWxDb250ZW50QWxpZ25tZW50ID0gY29udHJv
bA0KCQkJCS5nZXRIb3Jpem9udGFsQ29udGVudEFsaWdubWVudCgpOw0KCQlWZXJ0aWNhbENv
bnRlbnRBbGlnbm1lbnQgdmVydGljYWxDb250ZW50QWxpZ25tZW50ID0gY29udHJvbA0KCQkJ
CS5nZXRWZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnQoKTsNCg0KCQlyZXR1cm4gbWFyZ2luLmlz
RW1wdHkoKQ0KCQkJCSYmIHBhZGRpbmcuaXNFbXB0eSgpDQoJCQkJJiYgYm9yZGVyVGhpY2tu
ZXNzLmlzRW1wdHkoKQ0KCQkJCSYmIGhvcml6b250YWxDb250ZW50QWxpZ25tZW50ID09IEhv
cml6b250YWxDb250ZW50QWxpZ25tZW50LlN0cmV0Y2gNCgkJCQkmJiB2ZXJ0aWNhbENvbnRl
bnRBbGlnbm1lbnQgPT0gVmVydGljYWxDb250ZW50QWxpZ25tZW50LlN0cmV0Y2gNCgkJCQkm
JiBob3Jpem9udGFsQWxpZ25tZW50ID09IEhvcml6b250YWxBbGlnbm1lbnQuU3RyZXRjaA0K
CQkJCSYmIHZlcnRpY2FsQWxpZ25tZW50ID09IFZlcnRpY2FsQWxpZ25tZW50LlN0cmV0Y2g7
DQoJfQ0KDQoJcHJvdGVjdGVkIHZvaWQgdXBkYXRlVmVydGljYWxBbGlnbm1lbnQoYm9vbGVh
biByZWZyZXNoKSB7DQoJCWlmIChnZXRTb3VyY2VPYmplY3QoKSA9PSBudWxsKSB7DQoJCQly
ZXR1cm47DQoJCX0NCgkJaWYgKGlzQ3JlYXRpbmcoKSB8fCByZWZyZXNoKSB7DQoJCQlzdXBl
ci51cGRhdGVWZXJ0aWNhbEFsaWdubWVudChyZWZyZXNoKTsNCgkJCXJldHVybjsNCgkJfQ0K
CQlyZWNyZWF0ZVVJKCk7DQoJCXN1cGVyLnVwZGF0ZVZlcnRpY2FsQWxpZ25tZW50KHJlZnJl
c2gpOw0KCX0NCg0KCXByb3RlY3RlZCB2b2lkIHVwZGF0ZUhvcml6b250YWxBbGlnbm1lbnQo
Ym9vbGVhbiByZWZyZXNoKSB7DQoJCWlmIChnZXRTb3VyY2VPYmplY3QoKSA9PSBudWxsKSB7
DQoJCQlyZXR1cm47DQoJCX0NCgkJaWYgKGlzQ3JlYXRpbmcoKSB8fCByZWZyZXNoKSB7DQoJ
CQlzdXBlci51cGRhdGVIb3Jpem9udGFsQWxpZ25tZW50KHJlZnJlc2gpOw0KCQkJcmV0dXJu
Ow0KCQl9DQoJCXJlY3JlYXRlVUkoKTsNCgkJc3VwZXIudXBkYXRlSG9yaXpvbnRhbEFsaWdu
bWVudChyZWZyZXNoKTsNCgl9DQoNCglwdWJsaWMgdm9pZCB1cGRhdGVUZW1wbGF0ZShib29s
ZWFuIHJlZnJlc2gpIHsNCgkJT2JqZWN0IHdpZGdldCA9IGdldFNvdXJjZU9iamVjdCgpOw0K
CQlpZiAod2lkZ2V0ID09IG51bGwpIHsNCgkJCXJldHVybjsNCgkJfQ0KCQlpZiAoIXJlZnJl
c2gpIHsNCgkJCXJlY3JlYXRlVUkoKTsNCgkJfQ0KCX0NCg0KCXByb3RlY3RlZCB2b2lkIHVw
ZGF0ZUJhY2tncm91bmQoYm9vbGVhbiByZWZyZXNoKSB7DQoJCWlmIChpc1RoaW5FbGVtZW50
KCkpIHsNCgkJCU9iamVjdCB3aWRnZXQgPSBnZXRTb3VyY2VPYmplY3QoKTsNCgkJCWlmICgh
KHdpZGdldCBpbnN0YW5jZW9mIG9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkNvbnRyb2wpKSB7
DQoJCQkJcmV0dXJuOw0KCQkJfQ0KCQkJb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQ29udHJv
bCBjb250cm9sID0gKG9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkNvbnRyb2wpIHdpZGdldDsN
CgkJCUJydXNoIHZhbHVlID0gKChjb20uc295YXRlYy5lZmFjZS51cGYuQ29udHJvbCkgZ2V0
VmlzdWFsT2JqZWN0KCkpDQoJCQkJCS5nZXRCYWNrZ3JvdW5kKCk7DQoJCQlpZiAodmFsdWUg
IT0gbnVsbCkgew0KCQkJCWlmICh2YWx1ZSAhPSBCcnVzaGVzLlRyYW5zcGFyZW50KSB7DQoJ
CQkJCVJlc291cmNlIHJlc291cmNlID0gZ2V0UmVzb3VyY2UodmFsdWUpOw0KCQkJCQlpZiAo
cmVzb3VyY2UgaW5zdGFuY2VvZiBDb2xvcikgew0KCQkJCQkJY29udHJvbC5zZXRCYWNrZ3Jv
dW5kKChDb2xvcikgcmVzb3VyY2UpOw0KCQkJCQl9IGVsc2UgaWYgKHJlc291cmNlIGluc3Rh
bmNlb2YgSW1hZ2UpIHsNCgkJCQkJCWNvbnRyb2wuc2V0QmFja2dyb3VuZEltYWdlKChJbWFn
ZSkgcmVzb3VyY2UpOw0KCQkJCQl9DQoJCQkJCXJldHVybjsNCgkJCQl9DQoJCQl9DQoJCQly
ZXR1cm47DQoJCX0NCgkJb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQ29udHJvbCBjb21wb25l
bnQgPSBnZXRXcmFwcGVyUm9vdCgpOw0KCQlpZiAoY29tcG9uZW50ID09IG51bGwpIHsNCgkJ
CXJldHVybjsNCgkJfQ0KCQlCcnVzaCB2YWx1ZSA9ICgoY29tLnNveWF0ZWMuZWZhY2UudXBm
LkNvbnRyb2wpIGdldFZpc3VhbE9iamVjdCgpKQ0KCQkJCS5nZXRCYWNrZ3JvdW5kKCk7DQoJ
CWlmICh2YWx1ZSAhPSBudWxsKSB7DQoJCQlpZiAodmFsdWUgIT0gQnJ1c2hlcy5UcmFuc3Bh
cmVudCkgew0KCQkJCVJlc291cmNlIHJlc291cmNlID0gZ2V0UmVzb3VyY2UodmFsdWUpOw0K
CQkJCWlmIChyZXNvdXJjZSBpbnN0YW5jZW9mIENvbG9yKSB7DQoJCQkJCWNvbXBvbmVudC5z
ZXRCYWNrZ3JvdW5kKChDb2xvcikgcmVzb3VyY2UpOw0KCQkJCX0gZWxzZSBpZiAocmVzb3Vy
Y2UgaW5zdGFuY2VvZiBJbWFnZSkgew0KCQkJCQljb21wb25lbnQuc2V0QmFja2dyb3VuZElt
YWdlKChJbWFnZSkgcmVzb3VyY2UpOw0KCQkJCX0NCgkJCQlyZXR1cm47DQoJCQl9DQoJCX0N
Cgl9DQoNCglwcm90ZWN0ZWQgdm9pZCB1cGRhdGVCb3JkZXJCcnVzaChib29sZWFuIHJlZnJl
c2gpIHsNCgkJb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQ29udHJvbCBjb21wb25lbnQgPSBn
ZXRXcmFwcGVyQ29udGFpbmVyKCk7DQoJCWlmIChjb21wb25lbnQgPT0gbnVsbCkgew0KCQkJ
cmV0dXJuOw0KCQl9DQoJCWNvbXBvbmVudC5yZWRyYXcoKTsNCgl9DQoNCglAT3ZlcnJpZGUN
Cglwcm90ZWN0ZWQgdm9pZCBmaXJlUGFpbnQoRXZlbnQgZXZlbnQpIHsNCgkJb3JnLmVjbGlw
c2Uuc3d0LndpZGdldHMuQ29udHJvbCBjb250cm9sID0gKG9yZy5lY2xpcHNlLnN3dC53aWRn
ZXRzLkNvbnRyb2wpIGdldFdyYXBwZXJDb250YWluZXIoKTsNCgkJQ29udHJvbCBjb250cm9s
RWxlbWVudCA9IChDb250cm9sKSBnZXRWaXN1YWxPYmplY3QoKTsNCgkJVGhpY2tuZXNzIGJv
cmRlclRoaWNrbmVzcyA9IGNvbnRyb2xFbGVtZW50LmdldEJvcmRlclRoaWNrbmVzcygpOw0K
CQlpZiAoYm9yZGVyVGhpY2tuZXNzLmlzRW1wdHkoKSkgew0KCQkJc3VwZXIuZmlyZVBhaW50
KGV2ZW50KTsNCgkJCXJldHVybjsNCgkJfQ0KDQoJCUNvbG9yIGZnID0gY29udHJvbC5nZXRE
aXNwbGF5KCkuZ2V0U3lzdGVtQ29sb3IoU1dULkNPTE9SX0JMQUNLKTsNCgkJQnJ1c2ggdmFs
dWUgPSAoQnJ1c2gpIGNvbnRyb2xFbGVtZW50LmdldEJvcmRlckJydXNoKCk7DQoJCWlmICh2
YWx1ZSA9PSBudWxsIHx8IHZhbHVlID09IEJydXNoZXMuVHJhbnNwYXJlbnQpIHsNCgkJCWZn
ID0gZ2V0RGVmYXVsdEJvcmRlckNvbG9yKCk7DQoJCX0gZWxzZSB7DQoJCQlSZXNvdXJjZSBy
ZXNvdXJjZSA9IGdldFJlc291cmNlKHZhbHVlKTsNCgkJCWlmIChyZXNvdXJjZSBpbnN0YW5j
ZW9mIENvbG9yKSB7DQoJCQkJZmcgPSAoQ29sb3IpIHJlc291cmNlOw0KCQkJfQ0KCQl9DQoN
CgkJR0MgZ2MgPSBuZXcgR0MoY29udHJvbCk7DQoJCVJlY3RhbmdsZSByZWN0YW5nbGUgPSBj
b250cm9sLmdldEJvdW5kcygpOw0KCQlDb2xvciBiZyA9IGdjLmdldEJhY2tncm91bmQoKTsN
CgkJcmVjdGFuZ2xlLnggPSAwOw0KCQlyZWN0YW5nbGUueSA9IDA7DQoJCWdjLnNldEJhY2tn
cm91bmQoZmcpOw0KCQlnYy5maWxsUmVjdGFuZ2xlKHJlY3RhbmdsZSk7DQoJCXJlY3Rhbmds
ZS54ID0gKGludCkgYm9yZGVyVGhpY2tuZXNzLmdldExlZnQoKTsNCgkJcmVjdGFuZ2xlLnkg
PSAoaW50KSBib3JkZXJUaGlja25lc3MuZ2V0VG9wKCk7DQoNCgkJcmVjdGFuZ2xlLndpZHRo
IC09IChpbnQpIChib3JkZXJUaGlja25lc3MuZ2V0TGVmdCgpICsgYm9yZGVyVGhpY2tuZXNz
DQoJCQkJLmdldFJpZ2h0KCkpOw0KCQlyZWN0YW5nbGUuaGVpZ2h0IC09IChpbnQpIChib3Jk
ZXJUaGlja25lc3MuZ2V0VG9wKCkgKyBib3JkZXJUaGlja25lc3MNCgkJCQkuZ2V0Qm90dG9t
KCkpOw0KCQlnYy5zZXRCYWNrZ3JvdW5kKGJnKTsNCgkJZ2MuZmlsbFJlY3RhbmdsZShyZWN0
YW5nbGUpOw0KDQoJCWdjLmRpc3Bvc2UoKTsNCgkJc3VwZXIuZmlyZVBhaW50KGV2ZW50KTsN
Cgl9DQoNCglwcm90ZWN0ZWQgdm9pZCB1cGRhdGVCb3JkZXJUaGlja25lc3MoYm9vbGVhbiBy
ZWZyZXNoKSB7DQoJCXVwZGF0ZVBhZGRpbmcocmVmcmVzaCk7DQoJfQ0KDQoJcHJvdGVjdGVk
IHZvaWQgdXBkYXRlTWFyZ2luKGJvb2xlYW4gcmVmcmVzaCkgew0KCQlXcmFwcGVyIGNvbXBv
bmVudCA9IGdldFdyYXBwZXIoKTsNCgkJaWYgKGNvbXBvbmVudCA9PSBudWxsKSB7DQoJCQly
ZXR1cm47DQoJCX0NCgkJaWYgKCFpc0NyZWF0aW5nKCkgJiYgIXJlZnJlc2gpIHsNCgkJCXJl
Y3JlYXRlVUkoKTsNCgkJfQ0KCQlpZiAoaXNUaGluRWxlbWVudCgpKSB7DQoJCQlyZXR1cm47
DQoJCX0NCgkJVGhpY2tuZXNzIG1hcmdpbiA9ICgoQ29udHJvbCkgZ2V0VmlzdWFsT2JqZWN0
KCkpLmdldE1hcmdpbigpOw0KCQlpZiAobWFyZ2luICE9IG51bGwpIHsNCgkJCUNvbnRlbnRM
YXlvdXQgbGF5b3V0ID0gKENvbnRlbnRMYXlvdXQpIGNvbXBvbmVudC5nZXRMYXlvdXQoKTsN
CgkJCWxheW91dC5tYXJnaW5Cb3R0b20gPSAoaW50KSAobWFyZ2luLmdldEJvdHRvbSgpKTsN
CgkJCWxheW91dC5tYXJnaW5MZWZ0ID0gKGludCkgKG1hcmdpbi5nZXRMZWZ0KCkpOw0KCQkJ
bGF5b3V0Lm1hcmdpblRvcCA9IChpbnQpIChtYXJnaW4uZ2V0VG9wKCkpOw0KCQkJbGF5b3V0
Lm1hcmdpblJpZ2h0ID0gKGludCkgKG1hcmdpbi5nZXRSaWdodCgpKTsNCgkJCWNvbXBvbmVu
dC5zZXRMYXlvdXQobGF5b3V0KTsNCgkJfQ0KCX0NCg0KCXByb3RlY3RlZCB2b2lkIHVwZGF0
ZVBhZGRpbmcoYm9vbGVhbiByZWZyZXNoKSB7DQoJCWlmICghaXNDcmVhdGluZygpICYmICFy
ZWZyZXNoKSB7DQoJCQlyZWNyZWF0ZVVJKCk7DQoJCX0NCgkJaWYgKGlzVGhpbkVsZW1lbnQo
KSkgew0KCQkJcmV0dXJuOw0KCQl9DQoJCW9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkNvbnRy
b2wgY29udHJvbCA9IGdldFdyYXBwZXJDb250YWluZXIoKTsNCgkJaWYgKGNvbnRyb2wgPT0g
bnVsbCAmJiAhKGNvbnRyb2wgaW5zdGFuY2VvZiBDb21wb3NpdGUpKSB7DQoJCQlyZXR1cm47
DQoJCX0NCgkJY29tLnNveWF0ZWMuZWZhY2UudXBmLkNvbnRyb2wgaG9zdCA9IChjb20uc295
YXRlYy5lZmFjZS51cGYuQ29udHJvbCkgZ2V0VmlzdWFsT2JqZWN0KCk7DQoJCUNvbXBvc2l0
ZSBjb250YWluZXIgPSAoQ29tcG9zaXRlKSBjb250cm9sOw0KCQlDb250ZW50TGF5b3V0IGxh
eW91dCA9IChDb250ZW50TGF5b3V0KSBjb250YWluZXIuZ2V0TGF5b3V0KCk7DQoJCWludCBt
YXJnaW5Cb3R0b20gPSAwOw0KCQlpbnQgbWFyZ2luTGVmdCA9IDA7DQoJCWludCBtYXJnaW5U
b3AgPSAwOw0KCQlpbnQgbWFyZ2luUmlnaHQgPSAwOw0KDQoJCVRoaWNrbmVzcyBwYWRkaW5n
ID0gaG9zdC5nZXRQYWRkaW5nKCk7DQoJCWlmIChwYWRkaW5nICE9IG51bGwgJiYgIXBhZGRp
bmcuaXNFbXB0eSgpKSB7DQoJCQltYXJnaW5Cb3R0b20gKz0gKGludCkgcGFkZGluZy5nZXRC
b3R0b20oKTsNCgkJCW1hcmdpbkxlZnQgKz0gKGludCkgcGFkZGluZy5nZXRMZWZ0KCk7DQoJ
CQltYXJnaW5Ub3AgKz0gKGludCkgcGFkZGluZy5nZXRUb3AoKTsNCgkJCW1hcmdpblJpZ2h0
ICs9IChpbnQpIHBhZGRpbmcuZ2V0UmlnaHQoKTsNCgkJfQ0KDQoJCVRoaWNrbmVzcyBib3Jk
ZXIgPSBob3N0LmdldEJvcmRlclRoaWNrbmVzcygpOw0KCQlpZiAoYm9yZGVyICE9IG51bGwg
JiYgIWJvcmRlci5pc0VtcHR5KCkpIHsNCgkJCW1hcmdpbkJvdHRvbSArPSAoaW50KSBib3Jk
ZXIuZ2V0Qm90dG9tKCk7DQoJCQltYXJnaW5MZWZ0ICs9IChpbnQpIGJvcmRlci5nZXRMZWZ0
KCk7DQoJCQltYXJnaW5Ub3AgKz0gKGludCkgYm9yZGVyLmdldFRvcCgpOw0KCQkJbWFyZ2lu
UmlnaHQgKz0gKGludCkgYm9yZGVyLmdldFJpZ2h0KCk7DQoJCX0NCgkJbGF5b3V0Lm1hcmdp
bkJvdHRvbSA9IG1hcmdpbkJvdHRvbTsNCgkJbGF5b3V0Lm1hcmdpbkxlZnQgPSBtYXJnaW5M
ZWZ0Ow0KCQlsYXlvdXQubWFyZ2luVG9wID0gbWFyZ2luVG9wOw0KCQlsYXlvdXQubWFyZ2lu
UmlnaHQgPSBtYXJnaW5SaWdodDsNCg0KCQljb250YWluZXIuc2V0TGF5b3V0KGxheW91dCk7
DQoJfQ0KDQoJcHJvdGVjdGVkIHZvaWQgdXBkYXRlRm9udEZhbWlseShib29sZWFuIHJlZnJl
c2gpIHsNCgkJZG9VcGRhdGVGb250KCk7DQoJfQ0KDQoJcHJvdGVjdGVkIHZvaWQgdXBkYXRl
Rm9udFN0cmV0Y2goYm9vbGVhbiByZWZyZXNoKSB7DQoJCWRvVXBkYXRlRm9udCgpOw0KCX0N
Cg0KCXByb3RlY3RlZCB2b2lkIHVwZGF0ZUZvbnRXZWlnaHQoYm9vbGVhbiByZWZyZXNoKSB7
DQoJCWRvVXBkYXRlRm9udCgpOw0KCX0NCg0KCXByb3RlY3RlZCB2b2lkIHVwZGF0ZUZvbnRT
aXplKGJvb2xlYW4gcmVmcmVzaCkgew0KCQlkb1VwZGF0ZUZvbnQoKTsNCgl9DQoNCglwcm90
ZWN0ZWQgdm9pZCB1cGRhdGVGb250U3R5bGUoYm9vbGVhbiByZWZyZXNoKSB7DQoJCWRvVXBk
YXRlRm9udCgpOw0KCX0NCg0KCXByb3RlY3RlZCB2b2lkIGRvVXBkYXRlRm9udCgpIHsNCgkJ
aWYgKGlzVGhpbkVsZW1lbnQoKSkgew0KCQkJcmV0dXJuOw0KCQl9DQoJCS8vIENvbnRyb2wg
Y29udHJvbCA9IChDb250cm9sKSBnZXRTb3VyY2VPYmplY3QoKTsNCgkJb3JnLmVjbGlwc2Uu
c3d0LndpZGdldHMuQ29udHJvbCBjb250cm9sID0gY29udmVydChnZXRTb3VyY2VPYmplY3Qo
KSk7DQoJCWlmIChjb250cm9sID09IG51bGwpIHsNCgkJCXJldHVybjsNCgkJfQ0KCQljb20u
c295YXRlYy5lZmFjZS51cGYuQ29udHJvbCBob3N0ID0gKGNvbS5zb3lhdGVjLmVmYWNlLnVw
Zi5Db250cm9sKSBnZXRWaXN1YWxPYmplY3QoKTsNCg0KCQlTdHJpbmcgZm9udEZhbWlseSA9
IGhvc3QuZ2V0Rm9udEZhbWlseSgpOw0KDQoJCUZvbnRTdHlsZSBmb250U3R5bGUgPSBob3N0
LmdldEZvbnRTdHlsZSgpOw0KDQoJCUZvbnRXZWlnaHRzIGZvbnRXZWlnaHQgPSBob3N0Lmdl
dEZvbnRXZWlnaHQoKTsNCgkJZG91YmxlIHNpemUgPSBob3N0LmdldEZvbnRTaXplKCk7DQoN
CgkJRm9udFN0cmV0Y2hlcyBmb250U3RyZXRjaGVzID0gaG9zdC5nZXRGb250U3RyZXRjaCgp
Ow0KCQlGb250IGZvbnQgPSBnZXRSZXNvdXJjZUZvbnQoZm9udEZhbWlseSwgZm9udFN0eWxl
LCBmb250V2VpZ2h0LCBzaXplLA0KCQkJCWZvbnRTdHJldGNoZXMpOw0KCQlpZiAoZm9udCAh
PSBudWxsKSB7DQoJCQljb250cm9sLnNldEZvbnQoZm9udCk7DQoJCX0NCgl9DQoNCglwcm90
ZWN0ZWQgdm9pZCB1cGRhdGVGb3JlZ3JvdW5kKGJvb2xlYW4gcmVmcmVzaCkgew0KCQkvLyBD
b250cm9sIGNvbnRyb2wgPSAoQ29udHJvbCkgZ2V0U291cmNlT2JqZWN0KCk7DQoJCW9yZy5l
Y2xpcHNlLnN3dC53aWRnZXRzLkNvbnRyb2wgY29udHJvbCA9IGNvbnZlcnQoZ2V0U291cmNl
T2JqZWN0KCkpOw0KCQlpZiAoY29udHJvbCA9PSBudWxsKSB7DQoJCQlyZXR1cm47DQoJCX0N
CgkJQnJ1c2ggdmFsdWUgPSAoKGNvbS5zb3lhdGVjLmVmYWNlLnVwZi5Db250cm9sKSBnZXRW
aXN1YWxPYmplY3QoKSkNCgkJCQkuZ2V0Rm9yZWdyb3VuZCgpOw0KCQlpZiAodmFsdWUgIT0g
bnVsbCkgew0KCQkJUmVzb3VyY2UgcmVzb3VyY2UgPSBnZXRSZXNvdXJjZSh2YWx1ZSk7DQoJ
CQlpZiAocmVzb3VyY2UgaW5zdGFuY2VvZiBDb2xvcikgew0KCQkJCWNvbnRyb2wuc2V0Rm9y
ZWdyb3VuZCgoQ29sb3IpIHJlc291cmNlKTsNCgkJCX0NCgkJfSBlbHNlIHsNCgkJCWNvbnRy
b2wuc2V0Rm9yZWdyb3VuZChnZXREZWZhdWx0Rm9yZWdyb3VuZCgpKTsNCgkJfQ0KCX0NCg0K
CUBPdmVycmlkZQ0KCXB1YmxpYyB2b2lkIHVwZGF0ZVdpZHRoKGJvb2xlYW4gcmVmcmVzaCkg
ew0KCQl1cGRhdGVTaXplKCk7DQoJfQ0KDQoJQE92ZXJyaWRlDQoJcHVibGljIHZvaWQgdXBk
YXRlSGVpZ2h0KGJvb2xlYW4gcmVmcmVzaCkgew0KCQl1cGRhdGVTaXplKCk7DQoJfQ0KDQoJ
cHVibGljIHZvaWQgdXBkYXRlU2l6ZSgpIHsNCgkJaWYgKGlzVGhpbkVsZW1lbnQoKSkgew0K
CQkJcmV0dXJuOw0KCQl9DQoJCS8vIENvbnRyb2wgY29udHJvbCA9IChDb250cm9sKSBnZXRT
b3VyY2VPYmplY3QoKTsNCgkJb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQ29udHJvbCBjb250
cm9sID0gY29udmVydChnZXRTb3VyY2VPYmplY3QoKSk7DQoJCWlmIChjb250cm9sID09IG51
bGwpIHsNCgkJCXJldHVybjsNCgkJfQ0KCQljb20uc295YXRlYy5lZmFjZS51cGYuQ29udHJv
bCBob3N0ID0gKGNvbS5zb3lhdGVjLmVmYWNlLnVwZi5Db250cm9sKSBnZXRWaXN1YWxPYmpl
Y3QoKTsNCgkJZG91YmxlIHZhbHVlID0gaG9zdC5nZXRIZWlnaHQoKTsNCgkJVGhpY2tuZXNz
IHBhZGRpbmcgPSBob3N0LmdldFBhZGRpbmcoKTsNCgkJVGhpY2tuZXNzIGJvcmRlciA9IGhv
c3QuZ2V0Qm9yZGVyVGhpY2tuZXNzKCk7DQoJCVRoaWNrbmVzcyBtYXJnaW4gPSBob3N0Lmdl
dE1hcmdpbigpOw0KCQlpZiAoIURvdWJsZS5pc05hTih2YWx1ZSkpIHsNCgkJCVBvaW50IHNp
emUgPSBjb250cm9sLmdldFNpemUoKTsNCgkJCXNpemUueSA9IChpbnQpIHZhbHVlOw0KCQkJ
aWYgKHBhZGRpbmcgIT0gbnVsbCkgew0KCQkJCXNpemUueCArPSBwYWRkaW5nLmdldExlZnQo
KSArIHBhZGRpbmcuZ2V0UmlnaHQoKTsNCgkJCQlzaXplLnkgKz0gcGFkZGluZy5nZXRUb3Ao
KSArIHBhZGRpbmcuZ2V0Qm90dG9tKCk7DQoJCQl9DQoJCQlpZiAobWFyZ2luICE9IG51bGwp
IHsNCgkJCQlzaXplLnggKz0gbWFyZ2luLmdldExlZnQoKSArIG1hcmdpbi5nZXRSaWdodCgp
DQoJCQkJCQkrIGJvcmRlci5nZXRCb3R0b20oKTsNCgkJCQlzaXplLnkgKz0gbWFyZ2luLmdl
dFRvcCgpICsgbWFyZ2luLmdldEJvdHRvbSgpOw0KCQkJfQ0KCQkJaWYgKGJvcmRlciAhPSBu
dWxsKSB7DQoJCQkJc2l6ZS54ICs9IGJvcmRlci5nZXRMZWZ0KCkgKyBib3JkZXIuZ2V0Umln
aHQoKQ0KCQkJCQkJKyBib3JkZXIuZ2V0Qm90dG9tKCk7DQoJCQkJc2l6ZS55ICs9IGJvcmRl
ci5nZXRUb3AoKSArIGJvcmRlci5nZXRCb3R0b20oKTsNCgkJCX0NCg0KCQkJZG91YmxlIG1h
eCA9IGhvc3QuZ2V0TWF4SGVpZ2h0KCk7DQoJCQlkb3VibGUgbWluID0gaG9zdC5nZXRNaW5I
ZWlnaHQoKTsNCgkJCWlmIChzaXplLnkgPCBtaW4pIHsNCgkJCQlzaXplLnkgPSAoaW50KSBt
aW47DQoJCQl9DQoNCgkJCWlmIChzaXplLnkgPiBtYXgpIHsNCgkJCQlzaXplLnkgPSAoaW50
KSBtYXg7DQoJCQl9DQoJCQlXcmFwcGVyLmdldFdyYXBwZXJSb290KGNvbnRyb2wpLnNldFNp
emUoc2l6ZSk7DQoJCX0NCgl9DQoNCglwdWJsaWMgY29tLnNveWF0ZWMuZWZhY2UudXBmLlNp
emUgZ2V0RGVzaXJlZFNpemUoKSB7DQoJCXJldHVybiBuZXcgY29tLnNveWF0ZWMuZWZhY2Uu
dXBmLlNpemUoZ2V0RGVzaXJlZFdpZHRoKCksDQoJCQkJZ2V0RGVzaXJlZEhlaWdodCgpKTsN
Cgl9DQoNCglwdWJsaWMgZG91YmxlIGdldERlc2lyZWRXaWR0aCgpIHsNCgkJb3JnLmVjbGlw
c2Uuc3d0LndpZGdldHMuQ29udHJvbCBjb250cm9sID0gV3JhcHBlcg0KCQkJCS5nZXRXcmFw
cGVyKChvcmcuZWNsaXBzZS5zd3Qud2lkZ2V0cy5Db250cm9sKSBnZXRTb3VyY2VPYmplY3Qo
KSk7DQoJCWRvdWJsZSB3aWR0aCA9IDA7DQoJCWNvbS5zb3lhdGVjLmVmYWNlLnVwZi5Db250
cm9sIGhvc3QgPSAoY29tLnNveWF0ZWMuZWZhY2UudXBmLkNvbnRyb2wpIGdldFZpc3VhbE9i
amVjdCgpOw0KCQlpZiAoY29udHJvbCA9PSBudWxsKSB7DQoJCQl3aWR0aCA9IGhvc3QuZ2V0
V2lkdGgoKTsNCgkJfSBlbHNlIHsNCgkJCVBvaW50IHNpemUgPSBjb250cm9sLmNvbXB1dGVT
aXplKFNXVC5ERUZBVUxULCBTV1QuREVGQVVMVCk7DQoJCQl3aWR0aCA9IHNpemUueDsNCgkJ
fQ0KCQlUaGlja25lc3MgdGhpY2tuZXNzID0gaG9zdC5nZXRQYWRkaW5nKCk7DQoJCXdpZHRo
ICs9IHRoaWNrbmVzcy5nZXRMZWZ0KCkgKyB0aGlja25lc3MuZ2V0UmlnaHQoKTsNCgkJcmV0
dXJuIHdpZHRoOw0KCX0NCg0KCXB1YmxpYyBkb3VibGUgZ2V0RGVzaXJlZEhlaWdodCgpIHsN
CgkJY29tLnNveWF0ZWMuZWZhY2UudXBmLkNvbnRyb2wgaG9zdCA9IChjb20uc295YXRlYy5l
ZmFjZS51cGYuQ29udHJvbCkgZ2V0VmlzdWFsT2JqZWN0KCk7DQoJCW9yZy5lY2xpcHNlLnN3
dC53aWRnZXRzLkNvbnRyb2wgY29udHJvbCA9IFdyYXBwZXINCgkJCQkuZ2V0V3JhcHBlcigo
b3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQ29udHJvbCkgZ2V0U291cmNlT2JqZWN0KCkpOw0K
CQlkb3VibGUgaGVpZ2h0ID0gMDsNCgkJaWYgKGNvbnRyb2wgPT0gbnVsbCkgew0KCQkJaGVp
Z2h0ID0gaG9zdC5nZXRXaWR0aCgpOw0KCQl9IGVsc2Ugew0KCQkJUG9pbnQgc2l6ZSA9IGNv
bnRyb2wuY29tcHV0ZVNpemUoU1dULkRFRkFVTFQsIFNXVC5ERUZBVUxUKTsNCgkJCWhlaWdo
dCA9IHNpemUueTsNCgkJfQ0KCQlUaGlja25lc3MgdGhpY2tuZXNzID0gaG9zdC5nZXRQYWRk
aW5nKCk7DQoJCWhlaWdodCArPSB0aGlja25lc3MuZ2V0VG9wKCkgKyB0aGlja25lc3MuZ2V0
Qm90dG9tKCk7DQoJCXJldHVybiBoZWlnaHQ7DQoJfQ0KDQoJcHJvdGVjdGVkIHZvaWQgdXBk
YXRlVmVydGljYWxDb250ZW50QWxpZ25tZW50KGJvb2xlYW4gcmVmcmVzaCkgew0KCQlpZiAo
Z2V0U291cmNlT2JqZWN0KCkgPT0gbnVsbCkgew0KCQkJcmV0dXJuOw0KCQl9DQoJCWlmICgh
aXNDcmVhdGluZygpICYmICFyZWZyZXNoKSB7DQoJCQlyZWNyZWF0ZVVJKCk7DQoJCX0NCgkJ
aWYgKGlzVGhpbkVsZW1lbnQoKSkgew0KCQkJcmV0dXJuOw0KCQl9DQoJCW9yZy5lY2xpcHNl
LnN3dC53aWRnZXRzLkNvbnRyb2wgY29udHJvbCA9IGNvbnZlcnQoZ2V0V3JhcHBlckNvbnRh
aW5lcigpKTsNCgkJaWYgKGNvbnRyb2wgPT0gbnVsbCB8fCAhKGNvbnRyb2wgaW5zdGFuY2Vv
ZiBDb21wb3NpdGUpKSB7DQoJCQlyZXR1cm47DQoJCX0NCgkJQ29tcG9zaXRlIGNvbXBvc2l0
ZSA9IChDb21wb3NpdGUpIGNvbnRyb2w7DQoJCU9iamVjdCBvYmplY3QgPSBjb21wb3NpdGUu
Z2V0TGF5b3V0KCk7DQoJCWlmICghKG9iamVjdCBpbnN0YW5jZW9mIENvbnRlbnRMYXlvdXQp
KSB7DQoJCQlyZXR1cm47DQoJCX0NCgkJQ29udGVudExheW91dCBsYXlvdXQgPSAoQ29udGVu
dExheW91dCkgb2JqZWN0Ow0KCQljb20uc295YXRlYy5lZmFjZS51cGYuQ29udHJvbCBob3N0
ID0gKGNvbS5zb3lhdGVjLmVmYWNlLnVwZi5Db250cm9sKSBnZXRWaXN1YWxPYmplY3QoKTsN
CgkJc3dpdGNoIChob3N0LmdldFZlcnRpY2FsQ29udGVudEFsaWdubWVudCgpKSB7DQoJCWNh
c2UgQm90dG9tOg0KCQkJbGF5b3V0LnZlcnRpY2FsQWxpZ25tZW50ID0gVmVydGljYWxBbGln
bm1lbnQuQm90dG9tOw0KCQkJYnJlYWs7DQoJCWNhc2UgQ2VudGVyOg0KCQkJbGF5b3V0LnZl
cnRpY2FsQWxpZ25tZW50ID0gVmVydGljYWxBbGlnbm1lbnQuQ2VudGVyOw0KCQkJYnJlYWs7
DQoJCWNhc2UgU3RyZXRjaDoNCgkJCWxheW91dC52ZXJ0aWNhbEFsaWdubWVudCA9IFZlcnRp
Y2FsQWxpZ25tZW50LlN0cmV0Y2g7DQoJCQlicmVhazsNCgkJY2FzZSBUb3A6DQoJCQlsYXlv
dXQudmVydGljYWxBbGlnbm1lbnQgPSBWZXJ0aWNhbEFsaWdubWVudC5Ub3A7DQoJCQlicmVh
azsNCgkJfQ0KCQlkb0xheW91dChjb21wb3NpdGUsIHJlZnJlc2gsIGZhbHNlLCBmYWxzZSk7
DQoJfQ0KDQoJcHJvdGVjdGVkIHZvaWQgdXBkYXRlSG9yaXpvbnRhbENvbnRlbnRBbGlnbm1l
bnQoYm9vbGVhbiByZWZyZXNoKSB7DQoJCWlmIChnZXRTb3VyY2VPYmplY3QoKSA9PSBudWxs
KSB7DQoJCQlyZXR1cm47DQoJCX0NCgkJaWYgKCFpc0NyZWF0aW5nKCkgJiYgIXJlZnJlc2gp
IHsNCgkJCXJlY3JlYXRlVUkoKTsNCgkJfQ0KCQlpZiAoaXNUaGluRWxlbWVudCgpKSB7DQoJ
CQlyZXR1cm47DQoJCX0NCgkJb3JnLmVjbGlwc2Uuc3d0LndpZGdldHMuQ29udHJvbCBjb250
cm9sID0gY29udmVydChnZXRXcmFwcGVyQ29udGFpbmVyKCkpOw0KCQlpZiAoY29udHJvbCA9
PSBudWxsIHx8ICEoY29udHJvbCBpbnN0YW5jZW9mIENvbXBvc2l0ZSkpIHsNCgkJCXJldHVy
bjsNCgkJfQ0KCQlDb21wb3NpdGUgY29tcG9zaXRlID0gKENvbXBvc2l0ZSkgY29udHJvbDsN
CgkJT2JqZWN0IG9iamVjdCA9IGNvbXBvc2l0ZS5nZXRMYXlvdXQoKTsNCgkJaWYgKCEob2Jq
ZWN0IGluc3RhbmNlb2YgQ29udGVudExheW91dCkpIHsNCgkJCXJldHVybjsNCgkJfQ0KCQlD
b250ZW50TGF5b3V0IGxheW91dCA9IChDb250ZW50TGF5b3V0KSBvYmplY3Q7DQoJCWNvbS5z
b3lhdGVjLmVmYWNlLnVwZi5Db250cm9sIGhvc3QgPSAoY29tLnNveWF0ZWMuZWZhY2UudXBm
LkNvbnRyb2wpIGdldFZpc3VhbE9iamVjdCgpOw0KCQlzd2l0Y2ggKGhvc3QuZ2V0SG9yaXpv
bnRhbENvbnRlbnRBbGlnbm1lbnQoKSkgew0KCQljYXNlIENlbnRlcjoNCgkJCWxheW91dC5o
b3Jpem9udGFsQWxpZ25tZW50ID0gSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI7DQoJCQli
cmVhazsNCgkJY2FzZSBMZWZ0Og0KCQkJbGF5b3V0Lmhvcml6b250YWxBbGlnbm1lbnQgPSBI
b3Jpem9udGFsQWxpZ25tZW50LkxlZnQ7DQoJCQlicmVhazsNCgkJY2FzZSBSaWdodDoNCgkJ
CWxheW91dC5ob3Jpem9udGFsQWxpZ25tZW50ID0gSG9yaXpvbnRhbEFsaWdubWVudC5SaWdo
dDsNCgkJCWJyZWFrOw0KCQljYXNlIFN0cmV0Y2g6DQoJCQlsYXlvdXQuaG9yaXpvbnRhbEFs
aWdubWVudCA9IEhvcml6b250YWxBbGlnbm1lbnQuU3RyZXRjaDsNCgkJCWJyZWFrOw0KCQl9
DQoJCWNvbXBvc2l0ZS5zZXRMYXlvdXQobGF5b3V0KTsNCgl9DQoNCglwcm90ZWN0ZWQgdm9p
ZCBmaXJlVHJhdmVyc2UoRXZlbnQgZXZlbnQpIHsNCgkJaWYgKGV2ZW50LmtleUNvZGUgIT0g
U1dULlRBQiAmJiBldmVudC5rZXlDb2RlICE9IFNXVC5DUikgew0KCQkJcmV0dXJuOw0KCQl9
DQoJCUNvbnRyb2wgY29udHJvbCA9IChDb250cm9sKSBnZXRWaXN1YWxPYmplY3QoKTsNCgkJ
aWYgKGNvbnRyb2wgaW5zdGFuY2VvZiBUYWJDb250cm9sKSB7DQoJCQlUYWJDb250cm9sIHRh
YkNvbnRyb2wgPSAoVGFiQ29udHJvbCkgY29udHJvbDsNCgkJCVVJRWxlbWVudCBlbGVtZW50
ID0gdGFiQ29udHJvbC5nZXRTZWxlY3RlZENvbnRlbnQoKTsNCgkJCWlmIChlbGVtZW50IGlu
c3RhbmNlb2YgQ29udHJvbCkgew0KCQkJCWNvbnRyb2wgPSAoQ29udHJvbCkgZWxlbWVudDsN
CgkJCX0NCgkJfQ0KCQljb250cm9sLmdvTmV4dFRhYigpOw0KCQlldmVudC5kb2l0ID0gZmFs
c2U7DQoJfQ0KDQoJcHVibGljIG9yZy5lY2xpcHNlLnN3dC53aWRnZXRzLkNvbnRyb2wgY29u
dmVydChPYmplY3Qgb2JqKSB7DQoJCWlmIChvYmogaW5zdGFuY2VvZiBvcmcuZWNsaXBzZS5z
d3Qud2lkZ2V0cy5Db250cm9sKSB7DQoJCQlyZXR1cm4gKG9yZy5lY2xpcHNlLnN3dC53aWRn
ZXRzLkNvbnRyb2wpIG9iajsNCgkJfSBlbHNlIHsNCgkJCXJldHVybiBudWxsOw0KCQl9DQoJ
fQ0KfQ0K
--------------080509050502020809090403--

